<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Alumno Test</title>
</head>
<body>
<h1>Prueba de carga</h1>
<p id="landing"></p>
<script>
  var landing = document.getElementById('landing');
	const myurl			= 'http://localhost:3050/perf'
	landing.innerHTML = '>>>>>>>>>>>>';
  fetch(myurl)
  // Retrieve its body as ReadableStream
  .then(response => response.body)
  .then(rs => {
    const reader = rs.getReader();
    return new ReadableStream({
      async start(controller) {
        while (true) {
          const { done, value } = await reader.read();
					landing.innerHTML = landing.innerHTML + value;
					console.log(value);
          // When no more data needs to be consumed, break the reading
          if (done) {
            break;
          }
          // Enqueue the next data chunk into our target stream
          controller.enqueue(value);
        }
        // Close the stream
        controller.close();
        reader.releaseLock();
      }
    })
  })
  .catch(console.error);
</script>
</body>
</html>
